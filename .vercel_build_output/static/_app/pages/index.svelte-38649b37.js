import{S as x,i as G,s as j,e as g,k as q,c as f,a as b,n as A,d as m,N as y,b as i,f as L,L as p,P as M,M as v,Q as R,A as W,I as P,J as V,R as $,K as C,T as I,U as D,V as E,W as N}from"../chunks/vendor-c2717d7f.js";import{g as k}from"../chunks/navigation-51f4a605.js";import{a as _,b as J,d as S}from"../chunks/firebase-943ac691.js";import"../chunks/singletons-12a22614.js";function K(r){let t,e,a,d,c,o,s,n,w;return{c(){t=g("div"),e=g("div"),a=g("img"),c=q(),o=g("img"),this.h()},l(l){t=f(l,"DIV",{class:!0});var u=b(t);e=f(u,"DIV",{width:!0,class:!0});var h=b(e);a=f(h,"IMG",{src:!0,width:!0}),c=A(h),o=f(h,"IMG",{src:!0,alt:!0,width:!0}),h.forEach(m),u.forEach(m),this.h()},h(){y(a.src,d="\\tagane_black.png")||i(a,"src",d),i(a,"width","50%"),y(o.src,s="/login-with-google.png")||i(o,"src",s),i(o,"alt","Login With Google"),i(o,"width","50%"),i(e,"width","50%"),i(e,"class","center top"),i(t,"class","top center high")},m(l,u){L(l,t,u),p(t,e),p(e,a),p(e,c),p(e,o),n||(w=M(o,"click",r[0]),n=!0)},p:v,i:v,o:v,d(l){l&&m(t),n=!1,w()}}}function Q(r,t,e){let a;R(r,_,s=>e(1,a=s));async function d(){try{const s=I(S,"fossil",a.userid);return(await D(s)).exists()}catch(s){console.log(s)}}async function c(){const s=E(S,"fossil");await N(I(s,a.userid),{ammmo:!1,deino:!1,ovi:!1,ples:!1,poly:!1,tyranno:!1})}async function o(){try{const s=P(),n=new V;await $(s,n),d()?c():console.log("exit db!"),await k("/qr")}catch(s){console.log(s)}}return W(()=>{C(J,s=>{s?(_.set({isLoggedIn:!0,username:s.displayName,userid:s.uid}),console.log("login"),k("/qr")):(_.set({isLoggedIn:!1}),console.log("logout"))})}),[o]}class F extends x{constructor(t){super();G(this,t,Q,K,j,{})}}export{F as default};
